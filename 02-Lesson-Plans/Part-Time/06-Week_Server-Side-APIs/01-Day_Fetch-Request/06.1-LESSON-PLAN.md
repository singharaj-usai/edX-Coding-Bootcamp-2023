# 06.1 Weekday Lesson Plan: Server-Side APIs

## Overview

In this class, we will use Fetch to request data from server-side APIs, and we will consume that data.

## Instructor Notes

* In this lesson, students will complete activities `01-Ins_Demo_Curl` through `10-Stu_Demo_Dynamic`.

* Students will be using Fetch today to make requests to APIs. Take a few minutes before class to get familiar with the [MDN Web Docs on Fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch).

* The MDN Web Docs use ES6 in their Fetch API examples, but our activities will continue to use ES5 syntax, because that is what students will be familiar with. We will cover ES6 syntax in Module 09, so until then, our activities will continue to use ES5 syntax.

* GitHub's API is the only one we will make requests to, so familiarize yourself with the [GitHub documentation on the REST API](https://docs.github.com/en/rest). Students will rely heavily on it in class and might need help finding answers.

* Students will need to refer frequently to the GitHub documentation, so be sure to have the link on hand just in case.

* This is students' first exposure to server-side APIs.

## Learning Objectives

By the end of class, students will be able to:

* Explain the client-server model.

* Use `curl` to make a simple request to an API.

* Explain the Fetch API and why we use it.

* Use JavaScript to render data obtained with `fetch()` on the page.

* Explain the differences between Fetch, AJAX, and XHR. 

* Explain the structure of an API parameter.

## Slide Deck

* [Module 06 Slide Deck](https://docs.google.com/presentation/d/1-5nadf7eI4RgU5V_ymwD-NMWlwO20TDvkb3a4Xm80eM/edit?usp=sharing)

## Time Tracker

| Start | #   | Activity Name                                | Duration |
| ----- | --- | -------------------------------------------- | -------- |
| 0:00  | 1   | Instructor Do: Stoke Curiosity               | 0:10     |
| 0:10  | 2   | Instructor Demo: curl Demo                   | 0:05     |
| 0:15  | 3   | Student Do: curl Debug                       | 0:15     |
| 0:30  | 4   | Instructor Review: curl Debug                | 0:10     |
| 0:40  | 5   | Instructor Demo: Create Fetch                | 0:05     |
| 0:45  | 6   | Student Do:  Create Fetch                    | 0:15     |
| 1:00  | 7   | Instructor Review: Create Fetch              | 0:10     |
| 1:10  | 8   | Instructor Demo: Different APIs              | 0:05     |
| 1:15  | 9   | Student Do: Reverse APIs                     | 0:15     |
| 1:30  | 10  | BREAK                                        | 0:15     |
| 1:45  | 11  | Instructor Review: Reverse APIs              | 0:10     |
| 1:55  | 12  | Instructor Demo: Parse JSON                  | 0:05     |
| 2:00  | 13  | Student Do: Parse JSON                       | 0:15     |
| 2:15  | 14  | Instructor Review: Parse JSON                | 0:10     |
| 2:25  | 15  | Instructor Demo: Dynamic HTML                | 0:05     |
| 2:30  | 16  | Student Do: Dynamic HTML                     | 0:15     |
| 2:45  | 17  | Instructor Review: Dynamic HTML              | 0:15     |
| 3:00  | 18  | END                                          | 0:00     |

---

## Class Instruction

### 1. Instructor Do: Stoke Curiosity (10 min)

* Welcome students to class.
  
* Open the [slide deck](https://docs.google.com/presentation/d/1-5nadf7eI4RgU5V_ymwD-NMWlwO20TDvkb3a4Xm80eM/edit?usp=sharing) and follow these prompts on their corresponding slides:

  * **Server-Side APIs**

    * This module is all about server-side APIs, which are APIs that help us more on the data side of applications than the functional side.

  * **The Big Picture**

    * Take a moment to have your class pause and reflect on where they are in the course as a whole. We are nearing the end of Phase 1, where they‚Äôve learned many different foundational topics. 

  * **Boot Camp Pointers**

    * Students are routinely challenged during class and Challenge assignments. Remind them that they‚Äôre not alone through the grind! Ask them to rely on their support systems more readily as they start reaching the second phase of the program. 

  * **This Week: Server-Side APIs**

    * Walk through the learning objectives for the week with your class. These are the things they should expect to know by the end of the module. 

  * **This Week's Assignment**

    * Use the assignment description from the module overview to talk through the different requirements and how they align with the concepts learned throughout the module.

  * **Career Connection**

    * Use this slide to speak to you students will use the module's content in their careers going forward. It will help provide much-needed context. For many developers, server-side APIs are an integral piece of their day-to-day functions. Take a moment to talk about how you may have used them at work. 

    * Remember that students will also be using dynamically created HTML and CSS in their Challenge assignment this week, so you can feel free to talk about that as well. 

  * **Where do web applications live?**

    * Web applications live on servers.

    * Web servers are typically nothing more than specialized computers running software with the specific task of waiting for an internet request to come in and ask for data in return. 

  * **How are these requests made?**

    * On the web, data is transferred over **HTTP**, or **Hypertext Transfer Protocol**. HTTP is a set of rules and regulations for how data can be requested by a client and how a server can respond to that request.

    * Across all internet-connected devices, we constantly make HTTP requests to web servers for different types of data, like the following:
    
      * Visiting deployed applications at `<username>.github.io`.

      * A phone or watch automatically updating the weather forecast.

      * Using a media-streaming service.

      * Using HTML `<link>` and `<script>` tags to incorporate Bootstrap, jQuery, or any other third-party API into an application. 

  * **Can we use data from other servers in an application?**

    * Yes, we can! Just as we‚Äôve used third-party APIs to make an application's functionality and design easier to maintain, we can use specific functionality to request data over HTTP and use that data in an application. This data usually comes in the form of a special type of JavaScript object known as **JSON** (JavaScript Object Notation).

    * With this data, we can do any of the following in an application:  
    
      * Retrieve weather data to display in an application.
      
      * Use Google Maps to help create a trip itinerary.
      
      * Manage Spotify or YouTube playlists.
      
      * Control lights, alarms, and other devices.
      
      * And much, much more!

  * **How can we learn to use and implement these types of APIs?**

    * Like other APIs we‚Äôve used in the past, the implementation of server-side APIs depends on what solution that API provides. Some are very simple, while others are complex and powerful, so it‚Äôs up to us to determine which parts to use, if any.

    * You can try the following strategies to learn more about specific APIs:

      * Read the official documentation and practice with the provided examples.
      
      * Reverse-engineer finished code to see how something was accomplished.
      
      * Build something from scratch and debug it using the Chrome DevTools.
      
      * Ask questions!

* Navigate to `27-Stu_Mini-Project/Main/index.html` in your browser and demonstrate the following:

  * The mini-project for this module will use everything we've learned so far to build a search application that retrieves data from the Library of Congress.

  * We can search for something by filling out the form and selecting the form's submit button.

  * On form submission, we are directed to a second page, where search results appear.

  * We can also conduct more detailed searches by submitting the form again with a format selected.

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è Where does this data come from?

  * üôã It comes from a network request for data from the Library of Congress API.

  * ‚òùÔ∏è What are we learning?

  * üôã How to request data from server-side APIs to build data-driven applications.

  * ‚òùÔ∏è How does this project build off or extend previously learned material?

  * üôã We will need to put all of our knowledge in HTML, CSS, JavaScript, and APIs to use!

  * ‚òùÔ∏è How does this project relate to your career goals?

  * üôã Most large applications rely on data coming from a server, whether from a third-party service or from another server within the organization. There's no running from server-side APIs once you enter the professional development world!

* Answer any questions before proceeding to the next activity.

### 2. Instructor Demo: curl Demo (5 min)
  
* Open your command line, type `curl https://api.github.com/users`, and demonstrate the following:

  * GitHub returned a list of the last 30 users who made a profile!

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã).

  * ‚òùÔ∏è What happened when I entered the `curl` command to GitHub?

  * üôã We asked GitHub for user information via the command line.

  * ‚òùÔ∏è What is the **root endpoint** in the preceding URL?

  * üôã `https://api.github.com`

  * ‚òù What is the **path** that gives us `users`?

  * üôã `/users`

  * ‚òùÔ∏è What is a good use case for `curl`?

  * üôã We can use it to quickly confirm that an API URL is correct or working, without the need for JavaScript.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `02-Stu_Curl_Debug/README.md`.

### 3. Student Do: curl Debug (15 min)

* Direct students to the activity instructions found in `02-Stu_Curl_Debug/README.md`.

* Break your students into pairs that will work together on this activity.

  ```md
  # üêõ curl Command to GitHub API Doesn't Work

  Work with a partner to resolve the following issue(s):

  * As a developer, I want to use `curl` to verify a connection to the GitHub API.

  ## Expected Behavior

  When the command `curl http://api.github.com` is run from the command line, the output includes the following data:

      ```json
      {
        "current_user_url": "https://api.github.com/user",
        "current_user_authorizations_html_url": "https://github.com/settings/connections/applications{/client_id}",
        "authorizations_url": "https://api.github.com/authorizations",
        "code_search_url": "https://api.github.com/search/code?q={query}{&page,per_page,sort,order}",
        "commit_search_url": "https://api.github.com/search/commits?q={query}{&page,per_page,sort,order}",
        "emails_url": "https://api.github.com/user/emails",
        "emojis_url": "https://api.github.com/emojis",
        "events_url": "https://api.github.com/events",
        "feeds_url": "https://api.github.com/feeds",
        "followers_url": "https://api.github.com/user/followers",
        "following_url": "https://api.github.com/user/following{/target}",
        "gists_url": "https://api.github.com/gists{/gist_id}",
        "hub_url": "https://api.github.com/hub",
        "issue_search_url": "https://api.github.com/search/issues?q={query}{&page,per_page,sort,order}",
        "issues_url": "https://api.github.com/issues",
        "keys_url": "https://api.github.com/user/keys",
        "label_search_url": "https://api.github.com/search/labels?q={query}&repository_id={repository_id}{&page,per_page}",
        "notifications_url": "https://api.github.com/notifications",
        "organization_url": "https://api.github.com/orgs/{org}",
        "organization_repositories_url": "https://api.github.com/orgs/{org}/repos{?type,page,per_page,sort}",
        "organization_teams_url": "https://api.github.com/orgs/{org}/teams",
        "public_gists_url": "https://api.github.com/gists/public",
        "rate_limit_url": "https://api.github.com/rate_limit",
        "repository_url": "https://api.github.com/repos/{owner}/{repo}",
        "repository_search_url": "https://api.github.com/search/repositories?q={query}{&page,per_page,sort,order}",
        "current_user_repositories_url": "https://api.github.com/user/repos{?type,page,per_page,sort}",
        "starred_url": "https://api.github.com/user/starred{/owner}{/repo}",
        "starred_gists_url": "https://api.github.com/gists/starred",
        "user_url": "https://api.github.com/users/{user}",
        "user_organizations_url": "https://api.github.com/user/orgs",
        "user_repositories_url": "https://api.github.com/users/{user}/repos{?type,page,per_page,sort}",
        "user_search_url": "https://api.github.com/search/users?q={query}{&page,per_page,sort,order}"
      }
      ```

  ## Actual Behavior

  The command `curl http://api.github.com` does not print any data to the command line.

  ## Steps to Reproduce the Problem

  1. Open a command-line window.

  2. Type `curl http://api.github.com`.

  3. Press the Enter key.

  ---

  ## üí° Hints

  How might the official GitHub API documentation shed light on what the problem could be?

  ## üèÜ Bonus

  If you have completed this activity, work through the following challenge with your partner to further your knowledge:

    * If you wanted to save your `curl` response text to a file, how would you do so?

  Use [Google](https://www.google.com) or another search engine to research this.
  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help.

### 4. Instructor Review: curl Debug (10 min)

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with `curl`? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è Typos preventing responses

* Open the [GitHub documentation on REST endpoints](https://docs.github.com/en/rest/overview/resources-in-the-rest-api#root-endpoint) and explain the following:

  * üîë  Simple typos will prevent requests from hitting the proper endpoint, yielding no results. In the following example, when we examine the URL, we can see that it is using `http` instead of `https`:

    ```bash
    curl http://api.github.com
    ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è What would we reference to know whether the API URL is correct?

  * üôã The API documentation.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã We can refer to supplemental material, read the [GitHub documentation on REST endpoints](https://docs.github.com/en/rest/overview/resources-in-the-rest-api#root-endpoint), and stick around for office hours to ask for help.

* Answer any questions before proceeding to the next activity.

## 5. Instructor Demo: Create Fetch (5 min)

* Open `03-Ins_Demo-Fetch/index.html` in your browser and demonstrate the following:

  * üîë When we press the Click Me button, a list of Node.js GitHub repositories appears.
  
* Open `03-Ins_Demo-Fetch/assets/js/script.js` in your IDE and demonstrate the following:
  
  * We set the request URL to a variable. This is the URL that the `fetch()` method will use to request data. The path we are making a request to here is `/orgs/nodejs/repos`, as shown in the following code:

    ```js
    var requestUrl = 'https://api.github.com/orgs/nodejs/repos';
    ```

  * üîë We pass the `requestUrl` variable as an argument to the `fetch()` method, as shown in the following example:

    ```js
    fetch(requestUrl)
    ```

  * üîë We then convert the response into JSON and return the formatted response, as follows:

    ```js
    .then(function (response) {
      return response.json();
    })
    ```

    * **JSON** stands for **JavaScript Object Notation**. It is nothing more than the use of simple JavaScript objects to exchange data between the client and server. This makes the data easier to read and understand.

  * The preceding code should return the following response:

      ```json
      {
        "firstName": "Lashawn",
        "lastName": "Williams",
        "age": 40,
        "email":"lashawnwilliams@example.com"
      }
      ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è What do we need to pass through `fetch()` to get an API to send back data?

  * üôã We need a proper endpoint, as provided by the documentation.

  * ‚òùÔ∏è How is a request like this useful?

  * üôã It allows developers to quickly access all the data of a particular GitHub organization or consume all the data from any available endpoint.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `04-Stu_Create-Fetch/README.md`.

### 6. Student Do: Create Fetch (15 min) 

* Direct students to the activity instructions found in `04-Stu_Create-Fetch/README.md`.

* Break your students into pairs that will work together on this activity.

  ```md
  # üèóÔ∏è Implement a fetch() Request to Display User Repositories

  Work with a partner to implement the following user story:

    * As a user, I want to see a list of my GitHub repositories.

  ## Acceptance Criteria

    * It's done when I click the "Fetch Your User Repos" button, and a list of my GitHub repositories displays on the page.

  ## Assets

  The following image demonstrates the web application's appearance and functionality:

  ![The web page shows a user's GitHub repositories when the button is selected.](./Images/01-solution-screenshot.png)

  ---

  ## üí° Hints

  * How can we use the [GitHub API documentation on repositories](https://docs.github.com/en/rest/reference/repos#list-repositories-for-a-user) to support this implementation?

  * Where in the URL string is the repository endpoint added?

  ## üèÜ Bonus

  If you have completed this activity, work through the following challenge with your partner to further your knowledge:

  * In `fetch()` requests we use the URL. What is the difference between a URL and URI? 

  Use [Google](https://www.google.com) or another search engine to research this.

  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help.

### 7. Instructor Review: Create Fetch (10 min) 

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel creating a Fetch request? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è Root endpoint + path  = endpoint

  * ‚úîÔ∏è `/users/octocat/repos`

* Open `04-Stu_Create-Fetch/Solved/assets/js/script.js` in your IDE and explain the following:

  * We create a function called `getApi`, as follows:

    ```js
    function getApi() {
    ```

  * üîë We save the full endpoint we would like to make a request to in a variable called `requestUrl`, replacing `octocat` with the username we want to search, as shown in the following example:

    ```js
    var requestUrl = 'https://api.github.com/users/octocat/repos';
    ```

  * We then pass the `requestUrl` variable as an argument to the `fetch()` method, like in the following code:

    ```js
    fetch(requestUrl)
    ```

  * We convert the response into JSON. Lastly, we `return` the JSON-formatted response, as follows:

    ```js
    .then(function (response) {
      return response.json();
    })
    ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How do we build the `requestURL`?

  * üôã We attach the desired endpoint to the root endpoint.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã We can refer to supplemental material, read the [GitHub documentation on REST](https://docs.github.com/en/rest), and stick around for office hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 8. Instructor Demo: Different APIs (5 min)

* Open `05-Ins_Different_APIs/assets/js/script.js` in your IDE and demonstrate the following:

  * There is more than one way to request data from a server-side API.
    
    * üîë An `XMLHttpRequest`, or XHR for short, was the predecessor to `fetch()`. XHR requests involve much more code than a simple `fetch()`, as shown in the following code: 

      ```js
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function () {
        if (xhr.readyState === XMLHttpRequest.DONE) {
          console.log('XMLHttpRequest Response \n-------------');
          console.log(xhr.response);
        }
      };
      xhr.open('GET', requestUrl);
      xhr.send();
      ```

    * üîë AJAX is another alternative to the Fetch API. AJAX requests require the use of the third-party library jQuery to work, as shown in the following example:
    
      ```js
      $.ajax({
        url: requestUrl,
        method: 'GET',
      }).then(function (response) {
        console.log('Ajax Reponse \n-------------');
        console.log(response);
      });
      ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è Why are we only using `fetch()` if there are all these other options?

  * üôã `fetch()` is simple and fast, and it requires no third-party libraries&mdash;enabling us to get up and running quickly!

  * ‚òùÔ∏è How do we learn about these different methods of making API requests?

  * üôã We can read their documentation.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `06-Stu_Reverse_APIs/README.md`.

### 9. Student Do: Reverse API Calls (15 min)

* Direct students to the activity instructions found in `06-Stu_Reverse_APIs/README.md`.

* Break your students into pairs that will work together on this activity.

  ```md
  # üìê Add Comments to Implementation of Different Request Methods

  Work with a partner to add comments describing the functionality of the code found in [Unsolved/assets/js/script.js](./Unsolved/assets/js/script.js).

  ---

  ## üèÜ Bonus

  If you have completed this activity, work through the following challenge with your partner to further your knowledge:

  * Whenever we do a `fetch()` request, it goes through the DNS system. What is DNS?

  Use [Google](https://www.google.com) or another search engine to research this.
  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help.

### 10. BREAK (15 min)

### 11. Instructor Review: Reverse API Calls (10 min)

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with API calls? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è Different API calls

  * ‚úîÔ∏è XHR

  * ‚úîÔ∏è AJAX

* Open `06-Stu_Reverse_APIs/Solved/assets/js/script.js` in your IDE and explain the following: 

  * üîë With XHR, we first check whether `xhr.readyState` equals `XMLHttpRequest.DONE`, as follows:

    ```js
    if (xhr.readyState === XMLHttpRequest.DONE) {
    ```

  * üîë When the preceding condition is met, we log the XHR response, as shown in the following example:

    ```js
      console.log('XMLHttpRequest Response \n-------------');
      .log(xhr.response);
    }
    ```

  * üîë XHR initializes the API call with `.open` and sends the request with `.send`, like in the following code:

    ```js
    xhr.open('GET', requestUrl);
    xhr.send();
    ```

  * üîë jQuery uses `.ajax` to send the request to the API. On completion, the response is returned, as shown in the following example:

    ```js
    $.ajax({
      url: requestUrl,
      method: 'GET',
    }).then(function (response) {
      console.log('Ajax Response \n-------------');
      console.log(response);
    });
    ```

  * üîë AJAX and `fetch()` are structured similarly but do not function exactly the same. `fetch()` would try to resolve the response with a 404 or 500 error, while AJAX would not, as shown in the following example:

    ```js
    fetch(requestUrl)
        .then(function (response) {
        return response.json();
    })
    .then(function (data) {
        console.log('Fetch Response \n-------------');
        console.log(data);
    });
    ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è What is the difference between AJAX and `fetch()`?

  * üôã `fetch()` will try to resolve the data even if there is a 404 or 500 error, and it is built into the browser.

  * ‚òùÔ∏è What can we do if we are working with an API method we aren't familiar with?

  * üôã Look up that method's documentation.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã We can refer to supplemental material, read the [jQuery documentation on AJAX](https://api.jquery.com/category/ajax/) or the [MDN Web Docs on XMLHttpRequest](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest), and stick around for office hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 12. Instructor Demo: Parse JSON (5 min)

* Open `07-Ins_Demo_Parse/index.html` in your browser to the console. Expand the array under GitHub Organization Users, and demonstrate the following:

  * üîë We need to examine the API response to know how to access the data we want to extract.

  * üîë The response we receive is an array, meaning that we can loop through the data, accessing whatever specific data we want, as shown in the following code:

    ```js
    fetch('https://api.github.com/orgs/nodejs/repos')
    .then(function (response) {
      return response.json();
    })
    .then(function (data) {
      for (var i = 0; i < data.length; i++) {
        console.log(data[i].name);
      }
    });
    ```
  
* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How can we iterate over an array of data?

  * üôã We can use a `for` loop, just like always!

  * ‚òùÔ∏è What should we do before we use the data from an API response?

  * üôã We should examine the data so that we know which values we want from it.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `08-Stu_Parse_JSON/README.md`.

### 13. Student Do: Parse JSON (15 min) 

* Direct students to the activity instructions found in `08-Stu_Parse_JSON/README.md`.

* Break your students into pairs that will work together on this activity.

  ```md
  # üìñ Implement a `fetch()` Request to Log Repository Issues

  Work with a partner to implement the following user story:

    * As a developer, I want to log issues from Twitter's Chill repository.

  ## Acceptance Criteria

    * It's done when I open Chrome DevTools, and five issues from the Chill repository are logged in the console.

    * It's done when the issue's URL and username are logged in the DevTools console.

  ## üìù Notes

  Refer to the documentation: 

  [GitHub API documentation on listing repository issues](https://docs.github.com/en/rest/reference/issues#list-repository-issues)

  ---

  ## üí° Hints

  How do you add parameters to an API endpoint URL?

  ## üèÜ Bonus

  If you have completed this activity, work through the following challenge with your partner to further your knowledge:

  * We connect to these API servers through DNS, but they are attached to an IP address. How does this work?

  Use [Google](https://www.google.com) or another search engine to research this.
  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help.

### 14. Instructor Review: Parse JSON (10 min)

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with reading documentation? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è Response limits

  * ‚úîÔ∏è Parameters dictate responses

  * ‚úîÔ∏è Documentation for parameters

* Navigate to the [GitHub documentation on listing repository issues](https://docs.github.com/en/rest/reference/issues#list-repository-issues), and explain the following:

  * Scroll to the parameters list. We can use the `per_page` parameter to limit the amount of data that comes back in the response.

* Open [script.js](./Solved/assets/js/script.js) in your IDE and explain the following: 

  * üîë We add the `per_page` parameter to the end of the `requestUrl` variable and set the parameter to `5`, as follows:

    ```js
    var requestUrl = 'https://api.github.com/repos/nodejs/node/issues?per_page=5';
    ```

  * üîë We pass the completed `requestUrl` variable as an argument to the `fetch()`. On completion of the request, we convert the response to JSON in the return, like in the following code:

    ```js
    fetch(requestUrl)
    .then(function (response) {
      return response.json();
    })
    ```

  * üîë We loop through the data and console log the properties from the API response. We use dot notation on the `data` iterator, logging the `.url` and `.user.login` properties, as follows:

    ```js
    .then(function (data) {
        for (var i = 0; i < data.length; i++) {
            .log('Github Repo Issues \n----------');
            console.log(data[i].url);
            console.log(data[i].user.login);
        }
    });
    ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è Where are parameters added to an endpoint?

  * üôã They are normally chained on the end of the endpoint URL.

  * ‚òùÔ∏è Where do we find a list of parameters for a given endpoint?

  * üôã It can almost always be found on the documentation page.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã We can refer to supplemental material, read the [GitHub documentation on the REST API](https://docs.github.com/en/rest), and stick around for office hours to ask for help.

* Answer any questions before proceeding to the next activity.

### 15. Instructor Demo: Generate Dynamic Elements. (5 min)

* Open `09-Ins_Demo_Dynamic/index.html` in your browser and demonstrate the following:

  * üîë When we press the Click Me button, the page is populated with dynamically generated HTML.

  * üîë We see a list of the last five issues from the Node.js repo, along with the users who posted them.

* Open `09-Ins_Demo_Dynamic/assets/js/script.js` in your IDE and explain the following.

  * We first grab the root elements we will append to later, shown in the following code:

    ```js
    var issueContainer = document.getElementById('issues');
    var fetchButton = document.getElementById('fetch-button');
    ```

  * We make the `fetch()` request and then loop through the data. When we loop, we create new HTML elements, give them the content of the response, and append them to the page, as follows:

    ```js
    var userName = document.createElement('h3');
    var issueTitle = document.createElement('p');
    userName.textContent = data[i].user.login;
    issueTitle.textContent = data[i].title;
    issueContainer.append(userName);
    issueContainer.append(issueTitle);
    ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è Can this all be done without a third-party library?

  * üôã Yes! `fetch()` and other features of vanilla JavaScript will allow us to achieve this.

  * ‚òùÔ∏è How is this useful?

  * üôã It allows us to display the API responses on a webpage&mdash;dynamically!

  * ‚òùÔ∏è How would we build this?

  * üôã We would loop over the data provided by the `fetch()` response. On each loop, we create an HTML element, give it the content of the response, and append it to the page.

* Let students know that they only need to generate the dynamic elements; the `fetch()` request has been provided for them in this upcoming activity.

* Answer any questions before proceeding to the next activity.

* In preparation for the activity, ask TAs to start directing students to the activity instructions found in `10-Stu_Demo_Dynamic/README.md`.

### 16. Student Do: Generate Dynamic Elements (15 min)

* Direct students to the activity instructions found in `10-Stu_Demo_Dynamic/README.md`.

* Break your students into pairs that will work together on this activity.

  ```md
  # üèóÔ∏è Implement a fetch() Request to Display GitHub Data as HTML

  Work with a partner to implement the following user story:

    * As a user, I want to see a list of GitHub users and links to their profiles.

  ## Acceptance Criteria

    * It's done when I press the "Click Me" button, and a list of five GitHub users appears underneath on the page.

    * It's done when each user includes their login name and a URL to their GitHub profile.

  ---

  ## üí° Hints

  Use the previous three exercises as references if needed to put this together.

  ## üèÜ Bonus

  If you have completed this activity, work through the following challenge with your partner to further your knowledge:

  * What are some other third-party APIs you could make `fetch()` requests to?

  Use [Google](https://www.google.com) or another search engine to research this.
  ```

* While breaking everyone into groups, be sure to remind students and the rest of the instructional staff that questions on Slack or otherwise are welcome and will be handled. It's a good way for your team to prioritize students that need extra help.

### 17. Instructor Review: Generate Dynamic Elements (15 min)

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è How comfortable do you feel with generating HTML from Fetch data? (Poll via Fist to Five, Slack, or Zoom)

* Assure students that we will cover the solution to help solidify their understanding. If questions remain, remind them to use office hours to get extra help!

* Use the prompts and talking points below to review the following key (üîë) points:

  * ‚úîÔ∏è `document.getElementById`

  * ‚úîÔ∏è `for` loop

  * ‚úîÔ∏è dot notation

  * ‚úîÔ∏è `document.createElement`

  * ‚úîÔ∏è `.append`

* Open [script.js](./Solved/assets/js/script.js) in your IDE and explain the following:

  * üîë We use `document.getElementById` to target the `users` `<div>`and the `fetch-button` `<div>`. We save them to the variables `usersContainer` and `fetchButton` respectively, as follows:

    ```js
    var usersContainer = document.getElementById('users');
    var fetchButton = document.getElementById('fetch-button');
    ```

  * We use `fetch()` to make a request to receive some data. We are sure to convert it to JSON so that it can be more easily consumed, as shown in the following example:

    ```js
    fetch(requestUrl)
    .then(function (response) {
      return response.json();
    })
    .then(function (data) {
      console.log(data);
    ```

  * üîë We use a `for` loop to iterate through the response data, like in the following example:

    ```js
    for (var i = 0; i < data.length; i++) 
    ```

  * üîë On each iteration, we create an `H3` and `p` tag, like in the following code:

    ```js
    var userName = document.createElement('h3');
    var userUrl = document.createElement('p');
    ```

  * üîë We take the `.login` and `.url` properties off of the current iteration of the `data` array, making those the `textContent` of the `userName` and `userUrl` tags we created, as follows:

    ```js
    userName.textContent = data[i].login;
    userUrl.textContent = data[i].url;
    ```

  * üîë We finally append the created elements with their newly added text content to the `<div>`, as follows:

    ```js
    usersContainer.append(userName);
    usersContainer.append(userUrl);
    ```

* Ask the class the following questions (‚òùÔ∏è) and call on students for the answers (üôã):

  * ‚òùÔ∏è Why do we look at the response data properties?

  * üôã So that we know which data we need to use.

  * ‚òùÔ∏è What can we do if we don't completely understand this?

  * üôã We can refer to supplemental material, read the [GitHub documentation on REST](https://docs.github.com/en/rest), and stick around for office hours to ask for help.

* Answer any questions before ending the class.

### 18. END (0 min)

How did today‚Äôs lesson go? Your feedback is important. Please take 5 minutes to complete this [anonymous survey](https://forms.gle/RfcVyXiMmZQut6aJ6).

---
¬© 2022 edX Boot Camps LLC. Confidential and Proprietary. All Rights Reserved.
